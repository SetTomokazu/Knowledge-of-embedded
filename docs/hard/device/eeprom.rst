.. index:: EEPROM

.. _EEPROM:

EEPROM
====================
| 細かい内容は `Wiki <https://ja.wikipedia.org/wiki/EEPROM>`_ 参照
| :ref:`I2C通信` で接続し、絶対に消えてほしくない情報を保存する。
| 車載ではエンジンのON OFFの度に電源が落とされる為、
| マイコン内のRAM上にぽいっと置いておくと次にエンジンを付けたときに消えてしまう。
| 主に何が保存されるかというと :ref:`Diag` 情報である。
| 内部には独自のアドレス空間のROMが存在し、読み書きの際はそのアドレスを指定して行う。
| また、意図しない書き込みを防ぎ内部のデータを保護するWriteProtect端子が存在し、
| :ref:`I2C通信` の2線 + WriteProtect端子の3線をマイコンで制御する場合が多い。


運用
---------

* 保存するデータの種類が大抵複数ある為、マイコン側でセクションを決める。
    .. note: このセクションはEEPROMとしては無関心。あくまでマイコン側が勝手にそう使うだけである。

* マイコン起動時に、前回までの状態を保存しているならそれを読み込む。
    エンジン起動回数や、起動累積時間等。

* マイコンシャットダウン時に、今回の累積情報を保存する。

* 異常を検知した場合、異常の内容を保存する。
    タイミングや回数等があればそれも保存する。
